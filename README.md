# BrowserZip

**BrowserZip** ‚Äì —Ü–µ –ª–µ–≥–∫–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó ZIP‚Äë–∞—Ä—Ö—ñ–≤—ñ–≤ –±–µ–∑ —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —É –±—Ä–∞—É–∑–µ—Ä—ñ.  
–í–æ–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≤–µ–ª–∏–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø–æ—Ç–æ–∫–æ–≤–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è CRC32 —Ç–∞ Web Worker Pool –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.  

## üî• –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úî **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π:** –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ (Blob, —Ä—è–¥–∫–∏, Uint8Array) —Ç–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–∞–ø–∫–∏. –Ü–º‚Äô—è —Ñ–∞–π–ª—É –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —à–ª—è—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `folder/file.txt`), –∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `addFolder` (—è–∫—â–æ —ñ–º‚Äô—è –Ω–µ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è —Å–∏–º–≤–æ–ª–æ–º `/`, –≤—ñ–Ω –¥–æ–¥–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ).

‚úî **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Zip64:**  –Ø–∫—â–æ —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –ø–µ—Ä–µ–≤–∏—â—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ª—ñ–º—ñ—Ç (0xFFFFFFFF), —É –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è 0xFFFFFFFF, –∞ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–æ–¥–∞—î—Ç—å—Å—è –≤ Zip64 extra field. –î–ª—è –∫—ñ–Ω—Ü–µ–≤–æ—ó —á–∞—Å—Ç–∏–Ω–∏ –∞—Ä—Ö—ñ–≤—É (EOCD) —Ñ–æ—Ä–º—É—î—Ç—å—Å—è Zip64 EOCD Record —Ç–∞ Zip64 Locator, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞—Ä—Ö—ñ–≤–∏ –±—ñ–ª—å—à–µ 4 –ì–ë.

‚úî **–ü–æ—Ç–æ–∫–æ–≤–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è CRC32** ‚Äì –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ —Å—É–º–∞ `CRC32` –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ñ–∞–π–ª—ñ–≤ –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —á–∞–Ω–∫–∞–º–∏, —É–Ω–∏–∫–∞—é—á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –ø–æ–≤–Ω—ñ—Å—Ç—é –≤ –ø–∞–º‚Äô—è—Ç—å.  

‚úî **–°—Ç—Ä—ñ–º–æ–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è ZIP‚Äë–∞—Ä—Ö—ñ–≤—É** ‚Äì ZIP‚Äë—Ñ–∞–π–ª —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `ReadableStream`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Å—Ç—É–ø–æ–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ.  

‚úî **Web Worker Pool** ‚Äì –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—É–ª –≤–æ—Ä–∫–µ—Ä—ñ–≤ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å (–æ—Å–æ–±–ª–∏–≤–æ CRC32), —â–æ –∑–Ω–∞—á–Ω–æ –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.  

‚úî **–ë–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è UI** ‚Äì –∑–∞–≤–¥—è–∫–∏ Web Worker –≤—Å—ñ –≤–∞–∂–∫—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤ –æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ—Ü—ñ, –Ω–µ –≤–ø–ª–∏–≤–∞—é—á–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –±—Ä–∞—É–∑–µ—Ä–∞.  

‚úî **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** ‚Äì –≤–∫–ª—é—á–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –ø–æ—Ç–æ–∫–æ–≤–æ–º—É —á–∏—Ç–∞–Ω–Ω—ñ —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó ZIP‚Äë–∞—Ä—Ö—ñ–≤—É.  

‚úî **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –ø–∞–º‚Äô—è—Ç—ñ** ‚Äì –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó ZIP‚Äë–∞—Ä—Ö—ñ–≤—É –∑–≤—ñ–ª—å–Ω—è—é—Ç—å—Å—è –≤—Å—ñ —Ç–∏–º—á–∞—Å–æ–≤—ñ –æ–±‚Äô—î–∫—Ç–∏.  

---

## üöÄ –Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏

–¶—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —î —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ—é —Ç–∞ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.  
–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ `browserzip.js` –∞–±–æ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –π–æ–≥–æ —á–µ—Ä–µ–∑ `<script>`:

```html
<script src="browserzip.js"></script>
```

---

## ‚ú® –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**–î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É —É ZIP‚Äë–∞—Ä—Ö—ñ–≤**
```javascript
const zip = new BrowserZip();
await zip.addFile("example.txt", "–¶–µ –ø—Ä–∏–∫–ª–∞–¥ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª—É.");
await zip.addFile("large.bin", someLargeBlob);
zip.downloadZip("archive.zip");
zip.terminate();
```

**–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è ZIP‚Äë–∞—Ä—Ö—ñ–≤—É –±–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ**
```javascript
const zip = new BrowserZip();
await zip.addFile("document.pdf", pdfBlob);
await zip.addFile("backup.db", dbBlob);

// –ì–µ–Ω–µ—Ä—É—î–º–æ –∞—Ä—Ö—ñ–≤ —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
await zip.downloadZip("backup.zip");

// –ó–≤—ñ–ª—å–Ω—è—î–º–æ —Ä–µ—Å—É—Ä—Å–∏ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏
zip.terminate();
```

**–ü—Ä–∏–∫–ª–∞–¥ –∑—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –ø–∞–ø–∫–∏**
```javascript
(async () => {
  const zip = new BrowserZip();

  // –î–æ–¥–∞—î–º–æ —Ñ–∞–π–ª —É –∫–æ—Ä—ñ–Ω—å –∞—Ä—Ö—ñ–≤—É
  await zip.addFile("example.txt", "–¶–µ –ø—Ä–∏–∫–ª–∞–¥ –≤–º—ñ—Å—Ç—É.");

  // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É (–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é). –Ø–∫—â–æ —ñ–º‚Äô—è –Ω–µ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –Ω–∞ "/", –≤–æ–Ω–æ –±—É–¥–µ –¥–æ–ø–æ–≤–Ω–µ–Ω–µ.
  await zip.addFolder("folder/");

  // –î–æ–¥–∞—î–º–æ —Ñ–∞–π–ª —É —Å—Ç–≤–æ—Ä–µ–Ω—É –ø–∞–ø–∫—É
  await zip.addFile("folder/info.txt", "–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —É –ø–∞–ø—Ü—ñ.");

  // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É
  await zip.downloadZip("archive.zip");

  // –ó–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
  zip.terminate();
})();
```

---

## üõ† –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ
üîπ **–ü–æ—Ç–æ–∫–æ–≤–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è CRC32**<br/>
–ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –≤–µ—Å—å Blob –≤ –ø–∞–º‚Äô—è—Ç—å —ñ –ª–∏—à–µ —Ç–æ–¥—ñ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ CRC32, –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Ä–æ–∑–±–∏–≤–∞—î —Ñ–∞–π–ª –Ω–∞ —á–∞–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ 64KB) —ñ –ø–µ—Ä–µ–¥–∞—î —ó—Ö —É Web Worker Pool –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –¶–µ –º—ñ–Ω—ñ–º—ñ–∑—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–º‚Äô—è—Ç—ñ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≤–µ–ª–∏–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏. –î–ª—è –º–∞–ª–∏—Ö —Ñ–∞–π–ª—ñ–≤ (—Ä—è–¥–∫—ñ–≤, Uint8Array) CRC32 —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö Blob ‚Äì –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é WorkerPool —ñ–∑ –ø–æ—Ç–æ–∫–æ–≤–æ—é –æ–±—Ä–æ–±–∫–æ—é.

üîπ **Web Worker Pool –¥–ª—è –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è**<br/>
–ü—É–ª –≤–æ—Ä–∫–µ—Ä—ñ–≤ –¥–æ–∑–≤–æ–ª—è—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –æ–¥—Ä–∞–∑—É –¥–µ–∫—ñ–ª—å–∫–∞ —Ñ–∞–π–ª—ñ–≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ. –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–æ—Ä–∫–µ—Ä—ñ–≤ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (navigator.hardwareConcurrency || 4), —â–æ –æ–ø—Ç–∏–º—ñ–∑—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–∏—Ö —è–¥–µ—Ä.

üîπ **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ API (ReadableStream)**<br/>
–§—É–Ω–∫—Ü—ñ—è generateZipStream() –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î ReadableStream, —â–æ–± –ø–æ—Å—Ç—É–ø–æ–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ —É ZIP‚Äë–∞—Ä—Ö—ñ–≤, –∞ –Ω–µ —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –≤–µ—Å—å ZIP-—Ñ–∞–π–ª –≤ –ø–∞–º‚Äô—è—Ç—ñ –ø–µ—Ä–µ–¥ –π–æ–≥–æ –ø–µ—Ä–µ–¥–∞—á–µ—é. –¶–µ –∑–Ω–∞—á–Ω–æ —Å–∫–æ—Ä–æ—á—É—î –ø—ñ–∫–æ–≤–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ RAM.

üîπ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ ZIP**<br/>
 –õ–æ–∫–∞–ª—å–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∑–∞–ø–∏—Å–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥—É —Ç–∞ EOCD —Ñ–æ—Ä–º—É—é—Ç—å—Å—è –∑–≥—ñ–¥–Ω–æ –∑—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é ZIP. –Ø–∫—â–æ —Ä–æ–∑–º—ñ—Ä–∏ –ø–µ—Ä–µ–≤–∏—â—É—é—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Zip64 ‚Äì —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø–æ–ª—è—Ö –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è 0xFFFFFFFF, –∞ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–∞–Ω–æ—Å–∏—Ç—å—Å—è —É Zip64 extra field. –ö—Ä—ñ–º —Ç–æ–≥–æ, –¥–ª—è EOCD –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è Zip64 EOCD Record —Ç–∞ Zip64 EOCD Locator.

üîπ **–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏**<br/>
–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î —Å—É—á–∞—Å–Ω—ñ –±—Ä–∞—É–∑–µ—Ä–∏, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å Web Workers, ReadableStream —Ç–∞ API Blob.

---

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è
–¶—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –∑–∞ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é MIT. –í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—ó –≤ –±—É–¥—å-—è–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ.